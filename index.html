<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Hotel Booking ChatBot Demo</title>

  <!-- Rasa Webchat script from the Botfront project (adjust version or link if needed) -->
  <script src="https://cdn.jsdelivr.net/npm/rasa-webchat@1.0.1/lib/index.min.js"></script>

  <style>
    /* Basic 2-column layout: left instructions & right chat. Adjust as desired. */
    body {
      margin: 0;
      font-family: Arial, sans-serif;
    }
    .container {
      display: flex; /* side by side */
      height: 100vh; /* fill entire window height */
    }
    .left {
      flex: 1; /* take up half the screen */
      padding: 2rem;
      background: #f0f0f0; /* light background for instructions */
      display: flex;
      flex-direction: column;
      justify-content: start;
    }
    .right {
      flex: 1; /* the chat portion */
      position: relative; /* we place webchat container here */
    }
    h2 {
      margin-top: 0;
    }
    .date-section {
      margin: 1rem 0;
      background: #fff;
      padding: 1rem;
      border-radius: 5px;
      box-shadow: 1px 1px 5px #ccc;
    }
    label {
      display: inline-block;
      width: 120px;
      font-weight: bold;
    }
    input[type="date"] {
      padding: 0.3rem;
    }
    button {
      margin-top: 0.5rem;
      padding: 0.5rem 1rem;
      cursor: pointer;
    }

    /* The webchat container will be placed in the .right side */
    #webchat {
      position: absolute;
      bottom: 0;
      right: 0;
      width: 100%;
      height: 100%;
      /* If you want to make it pop-up instead of occupying entire half, you can adjust styles. */
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="left">
      <h2>Hotel Bot Instructions</h2>
      <p>
        Welcome to our Hotel Booking ChatBot demo!
        <br />
        You can chat directly on the right side, or you can pick dates here and send them to the bot.
      </p>

      <div class="date-section">
        <label for="checkin">Check-in:</label>
        <input type="date" id="checkin" />
        <br />
        <label for="checkout">Check-out:</label>
        <input type="date" id="checkout" />
        <br />
        <button onclick="sendDatesToBot()">Send Dates</button>
      </div>

      <p>
        <strong>Tips:</strong><br />
        - If you prefer typing, just type into the chat on the right.<br />
        - If you want to reset, type <code>reset</code> in the chat or click the 'Reset' button
          (once you have that logic in Rasa).<br />
        - Make sure your check-out date is after your check-in date.
      </p>
    </div>

    <div class="right">
      <!-- Rasa webchat container -->
      <div id="webchat"></div>
    </div>
  </div>

  <script>
    // The function to grab the date inputs and send to Rasa as a message
    function sendDatesToBot() {
      const checkin = document.getElementById('checkin').value;   // e.g. "2026-01-15"
      const checkout = document.getElementById('checkout').value; // e.g. "2026-01-25"

      // If either is empty, show a quick note (or you can handle differently)
      if (!checkin || !checkout) {
        alert("Please pick both check-in and check-out dates before sending.");
        return;
      }

      // Convert them into a user-friendly text, e.g. "Check-in: 15 January 2026"
      // This is entirely up to you. We'll do a quick approach:
      const dateOptions = { year: 'numeric', month: 'long', day: 'numeric' };
      const checkinObj = new Date(checkin);  // from "YYYY-MM-DD"
      const checkoutObj = new Date(checkout);

      // Format e.g. "January 15, 2026"
      const checkinStr = checkinObj.toLocaleDateString('en-GB', dateOptions);
      const checkoutStr = checkoutObj.toLocaleDateString('en-GB', dateOptions);

      // Then we combine them into one message string
      const combinedMessage = `My check-in is ${checkinStr} and check-out is ${checkoutStr}`;

      // Now we send this text to Rasa
      // The webchat instance is "window.rasaWebchat.send"
      window.rasaWebchat.send(combinedMessage);

      // Optionally, we can also focus the chat input again
      // or show a "Dates sent!" note, etc.
      alert("Sent: " + combinedMessage);
    }

    // Initialize Rasa WebChat
    // The minimal config is server: 'http://localhost:5005'
    // In the real environment, ensure your Rasa server is up & running
    // and CORS or tokens are properly set. Adjust at will.
    (function() {
      window.onload = () => {
        window.WebChat.default.init({
          selector: "#webchat",
          initPayload: "/greet",
          // The link to your Rasa server
          socketUrl: "http://localhost:5005",
          // For Rasa 3.x with websocket, typically: "ws://localhost:5005"
          socketPath: "/socket.io/",
          title: "HotelBooking Bot",
          subtitle: "Ask me anything about booking",
          // you can store session data or specify a custom ID if needed
          // for now we do nothing special
        });
      };
    })();
  </script>
</body>
</html>